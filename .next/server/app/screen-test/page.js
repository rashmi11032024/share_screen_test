(()=>{var e={};e.id=96,e.ids=[96],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3122:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>g,tree:()=>c}),s(3265),s(1506),s(5866);var t=s(3191),a=s(8716),n=s(7922),i=s.n(n),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(r,o);let c=["",{children:["screen-test",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3265)),"/Users/rashmibharti/Desktop/share_screen_test/app/screen-test/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/Users/rashmibharti/Desktop/share_screen_test/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/rashmibharti/Desktop/share_screen_test/app/screen-test/page.tsx"],u="/screen-test/page",m={require:s,loadChunk:()=>Promise.resolve()},g=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/screen-test/page",pathname:"/screen-test",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5669:(e,r,s)=>{Promise.resolve().then(s.bind(s,2142))},1811:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5549:()=>{},2142:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>m});var t,a=s(326),n=s(7577),i=s(5047);!function(e){e.IDLE="idle",e.REQUESTING="requesting",e.GRANTED="granted",e.CANCELLED="cancelled",e.DENIED="denied",e.ERROR="error"}(t||(t={}));var l=s(3982);let o=()=>{let[e,r]=(0,n.useState)(t.IDLE),[s,a]=(0,n.useState)(null),[i,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(!1),g=(0,n.useRef)(!0),h=e=>{l.k.debug("Extracting display type from track");let r=e.getSettings();l.k.debug("Track settings:",r);let s=r.displaySurface;return"monitor"===s?"monitor":"window"===s?"window":"browser"===s?"browser":(l.k.warn("Unknown display surface type:",s),"unknown")},p=(0,n.useCallback)(e=>{l.k.group("Extracting stream metadata");let r=e.getVideoTracks()[0];if(!r)throw l.k.error("No video track found in stream"),l.k.groupEnd(),Error("No video track found");let s=r.getSettings(),t={displayType:h(r),width:s.width||0,height:s.height||0,frameRate:s.frameRate||0};return l.k.info("Stream metadata extracted:",t),l.k.groupEnd(),t},[]),x=(0,n.useCallback)(e=>{if(!e){l.k.debug("No stream to cleanup");return}l.k.group("Cleaning up stream");let r=e.getTracks();l.k.debug(`Stopping ${r.length} track(s)`),r.forEach((e,r)=>{l.k.debug(`Stopping track ${r+1}: ${e.kind} - ${e.label}`),e.stop()}),l.k.info("Stream cleanup complete"),l.k.groupEnd()},[]),b=(0,n.useCallback)(()=>{if(l.k.warn("Stream ended - user stopped sharing or browser ended stream"),!g.current){l.k.debug("Component unmounted, skipping state updates");return}m(!1),r(t.IDLE),a(null),o(null),l.k.info("State reset after stream end")},[]),f=(0,n.useCallback)(async()=>{l.k.group("Requesting screen share"),l.k.info("User initiated screen share request"),d(null),r(t.REQUESTING);try{l.k.debug("Calling getDisplayMedia API");let e=await navigator.mediaDevices.getDisplayMedia({video:{frameRate:{ideal:30}},audio:!1});l.k.info("Screen share permission granted"),l.k.debug("Stream obtained:",{id:e.id,active:e.active,trackCount:e.getTracks().length});let s=p(e),n=e.getVideoTracks()[0];n&&(l.k.debug("Setting up onended listener for video track"),n.onended=()=>{l.k.warn("Video track ended event fired"),b()}),g.current?(r(t.GRANTED),a(e),o(s),m(!0),l.k.info("Screen share started successfully")):(l.k.warn("Component unmounted during request, cleaning up stream"),x(e)),l.k.groupEnd()}catch(e){if(l.k.group("Screen share request failed"),l.k.error("Error occurred:",e),!g.current){l.k.debug("Component unmounted, skipping error handling"),l.k.groupEnd();return}"NotAllowedError"===e.name?e.message.includes("cancelled")||e.message.includes("dismiss")?(l.k.warn("User cancelled the screen picker"),r(t.CANCELLED)):(l.k.warn("Permission denied by user or system"),r(t.DENIED)):"NotFoundError"===e.name?(l.k.error("No screen/window/tab was selected"),r(t.CANCELLED)):"NotSupportedError"===e.name?(l.k.error("Screen sharing not supported"),r(t.ERROR)):"AbortError"===e.name?(l.k.warn("Request was aborted"),r(t.CANCELLED)):(l.k.error("Unknown error occurred"),r(t.ERROR)),d(e),m(!1),l.k.groupEnd()}},[p,b,x]),k=(0,n.useCallback)(()=>{if(l.k.info("Manual stop screen share requested"),!s){l.k.warn("No active stream to stop");return}x(s),g.current&&(m(!1),r(t.IDLE),a(null),o(null),l.k.info("Screen share stopped successfully"))},[s,x]);return(0,n.useEffect)(()=>(l.k.debug("useScreenShare hook mounted"),()=>{l.k.debug("useScreenShare hook unmounting - cleaning up"),g.current=!1,s&&x(s)}),[s,x]),{permissionState:e,stream:s,metadata:i,error:c,isActive:u,requestScreenShare:f,stopScreenShare:k}};var c=s(7862);let d=({stream:e,metadata:r})=>{let s=(0,n.useRef)(null);(0,n.useEffect)(()=>(l.k.debug("StreamPreview: Setting up video element"),s.current&&e&&(l.k.debug("StreamPreview: Attaching stream to video element"),s.current.srcObject=e,s.current.play().catch(e=>{l.k.error("StreamPreview: Error playing video",e)})),()=>{l.k.debug("StreamPreview: Cleaning up video element"),s.current&&(s.current.srcObject=null)}),[e]);let t={monitor:"Entire Screen",window:"Application Window",browser:"Browser Tab",unknown:"Unknown Source"};return(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-4",children:[a.jsx("div",{className:"flex items-center justify-center gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-green-100 text-green-800 px-4 py-2 rounded-full",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"font-semibold",children:"Screen Stream Active"})]})}),(0,a.jsxs)("div",{className:"relative bg-black rounded-lg overflow-hidden shadow-2xl",children:[a.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto"}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:(0,a.jsxs)("div",{className:"text-white text-sm space-y-1",children:[(0,a.jsxs)("p",{className:"font-semibold",children:["\uD83D\uDCFA ",t[r.displayType]]}),(0,a.jsxs)("p",{className:"opacity-90",children:["\uD83D\uDCD0 Resolution: ",r.width," \xd7 ",r.height]}),(0,a.jsxs)("p",{className:"opacity-90",children:["\uD83C\uDFAC Frame Rate: ",r.frameRate," fps"]})]})})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Stream Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"bg-white p-3 rounded",children:[a.jsx("p",{className:"text-gray-600 font-medium",children:"Display Type"}),a.jsx("p",{className:"text-gray-900 font-semibold",children:t[r.displayType]})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded",children:[a.jsx("p",{className:"text-gray-600 font-medium",children:"Resolution"}),(0,a.jsxs)("p",{className:"text-gray-900 font-semibold",children:[r.width," \xd7 ",r.height]})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded",children:[a.jsx("p",{className:"text-gray-600 font-medium",children:"Frame Rate"}),(0,a.jsxs)("p",{className:"text-gray-900 font-semibold",children:[r.frameRate," fps"]})]})]})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-900",children:[a.jsx("span",{className:"font-semibold",children:"Note:"})," This is a local preview only. No recording or backend streaming is happening."]})})]})},u=({permissionState:e,error:r})=>{if(e===t.IDLE||e===t.GRANTED)return null;let s={[t.REQUESTING]:{title:"Requesting Permission",message:"Please select a screen, window, or tab to share in the browser dialog.",icon:"\uD83D\uDD04",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-900"},[t.CANCELLED]:{title:"Screen Sharing Cancelled",message:'You cancelled the screen selection. Click "Retry" to try again.',icon:"❌",bgColor:"bg-gray-50",borderColor:"border-gray-200",textColor:"text-gray-900"},[t.DENIED]:{title:"Permission Denied",message:"Screen sharing permission was denied. Please check your browser settings and try again.",icon:"\uD83D\uDEAB",bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-900"},[t.ERROR]:{title:"Error Occurred",message:r?.message||"An unknown error occurred while requesting screen share.",icon:"⚠️",bgColor:"bg-orange-50",borderColor:"border-orange-200",textColor:"text-orange-900"}}[e];return s?a.jsx("div",{className:`${s.bgColor} ${s.borderColor} ${s.textColor} border rounded-lg p-6 max-w-2xl mx-auto`,children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"text-4xl flex-shrink-0",children:s.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold mb-2",children:s.title}),a.jsx("p",{className:"text-sm opacity-90",children:s.message}),r&&e===t.ERROR&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-white/50 rounded border border-current/20",children:[(0,a.jsxs)("p",{className:"text-xs font-mono",children:[a.jsx("span",{className:"font-semibold",children:"Error Name:"})," ",r.name]}),(0,a.jsxs)("p",{className:"text-xs font-mono mt-1",children:[a.jsx("span",{className:"font-semibold",children:"Details:"})," ",r.message]})]})]})]})}):null};function m(){let e=(0,i.useRouter)(),{permissionState:r,stream:s,metadata:n,error:m,isActive:g,requestScreenShare:h,stopScreenShare:p}=o(),x=async()=>{l.k.info('User clicked "Start Screen Capture" button'),await h()},b=async()=>{l.k.info('User clicked "Retry Screen Test" button'),await h()},f=()=>{l.k.info('User clicked "Back to Home" button'),e.push("/")},k=r===t.IDLE||r===t.CANCELLED||r===t.DENIED||r===t.ERROR,w=r===t.REQUESTING;return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Screen Sharing Test"}),a.jsx("p",{className:"text-gray-600",children:"Test your browser's screen sharing capabilities"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 space-y-6",children:[a.jsx(u,{permissionState:r,error:m}),k&&(0,a.jsxs)("div",{className:"text-center space-y-6",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83C\uDFA5"}),(0,a.jsxs)("div",{className:"max-w-xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Ready to Test Screen Sharing"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Click the button below to request screen sharing permission. You'll be able to select which screen, window, or tab to share."})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(c.z,{onClick:x,disabled:w,loading:w,fullWidth:!0,children:w?"Opening Screen Picker...":"Start Screen Capture"}),a.jsx(c.z,{onClick:f,variant:"secondary",fullWidth:!0,children:"← Back to Home"})]}),r===t.IDLE&&(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mt-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"What will happen:"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-700 text-left space-y-1.5 max-w-md mx-auto",children:[(0,a.jsxs)("li",{className:"flex gap-2",children:[a.jsx("span",{children:"•"}),a.jsx("span",{children:"Your browser will show a screen picker dialog"})]}),(0,a.jsxs)("li",{className:"flex gap-2",children:[a.jsx("span",{children:"•"}),a.jsx("span",{children:"Select which screen/window/tab to share"})]}),(0,a.jsxs)("li",{className:"flex gap-2",children:[a.jsx("span",{children:"•"}),a.jsx("span",{children:"Grant permission to start screen sharing"})]}),(0,a.jsxs)("li",{className:"flex gap-2",children:[a.jsx("span",{children:"•"}),a.jsx("span",{children:"View a live preview of your shared screen"})]})]})]})]}),g&&s&&n&&(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(d,{stream:s,metadata:n}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[a.jsx(c.z,{onClick:()=>{l.k.info('User clicked "Stop Screen Sharing" button'),p()},variant:"danger",children:"Stop Screen Sharing"}),a.jsx(c.z,{onClick:f,variant:"secondary",children:"Back to Home"})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700 text-center",children:[a.jsx("span",{className:"font-semibold",children:"Tip:"}),' You can also stop sharing by clicking the browser\'s "Stop sharing" button or closing the shared tab/window.']})})]})]}),!g&&r===t.IDLE&&null===s&&null!==m&&(0,a.jsxs)("div",{className:"mt-6 bg-white rounded-2xl shadow-xl p-6 md:p-8 text-center space-y-6",children:[a.jsx("div",{className:"text-6xl mb-4",children:"✋"}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Screen Sharing Stopped"}),a.jsx("p",{className:"text-gray-600",children:"The screen sharing session has ended. You can start a new test or return to the homepage."})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center max-w-md mx-auto",children:[a.jsx(c.z,{onClick:b,fullWidth:!0,children:"Retry Screen Test"}),a.jsx(c.z,{onClick:f,variant:"secondary",fullWidth:!0,children:"Back to Home"})]})]}),!1]})})}},7862:(e,r,s)=>{"use strict";s.d(r,{z:()=>a});var t=s(326);s(7577);let a=({children:e,onClick:r,variant:s="primary",disabled:a=!1,type:n="button",fullWidth:i=!1,loading:l=!1})=>t.jsx("button",{type:n,onClick:r,disabled:a||l,className:`px-6 py-3 rounded-lg font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 active:bg-blue-800",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500 active:bg-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 active:bg-red-800"}[s]} ${i?"w-full":""}`,children:l?(0,t.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{children:e})]}):e})},5047:(e,r,s)=>{"use strict";var t=s(7389);s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}})},3982:(e,r,s)=>{"use strict";s.d(r,{k:()=>a});class t{formatMessage(e,r,...s){let t=new Date().toISOString(),a=`${this.prefix} [${t}] [${e.toUpperCase()}] ${r}`;switch(e){case"error":console.error(a,...s);break;case"warn":console.warn(a,...s);break;case"debug":this.isDebugEnabled&&console.log(a,...s);break;default:console.log(a,...s)}}info(e,...r){this.formatMessage("info",e,...r)}warn(e,...r){this.formatMessage("warn",e,...r)}error(e,...r){this.formatMessage("error",e,...r)}debug(e,...r){this.formatMessage("debug",e,...r)}group(e){console.group(`${this.prefix} ${e}`)}groupEnd(){console.groupEnd()}constructor(){this.prefix="[ScreenShare]",this.isDebugEnabled=!0}}let a=new t},1506:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>l,metadata:()=>i});var t=s(9510),a=s(5384),n=s.n(a);s(7272);let i={title:"Screen Share Test App",description:"Browser screen sharing capability test application"};function l({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{className:n().className,children:e})})}},3265:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(8570).createProxy)(String.raw`/Users/rashmibharti/Desktop/share_screen_test/app/screen-test/page.tsx#default`)},7272:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[734],()=>s(3122));module.exports=t})();